(()=>{"use strict";const e=require("socket.io"),n=require("uuid"),o=new e.Server(3e3);console.log("Listening on *:3000"),o.sockets.on("connection",(e=>{console.log(`Connected ${e.id}`),e.on("requestLogin",((e,n)=>{console.log(`Login request for '${e.username}'`),n(function(e){if(!r.has(e.username))return!1;let n=s[e.userID];return null!=n&&n.username==e.username}(e))})),e.on("requestRegister",((e,o)=>{console.log(`Register request for '${e}'`),o(function(e){if(r.has(e))return{accepted:!1,reason:"Username already taken"};let o={username:e,userID:(0,n.v4)()};return r.add(e),s[o.userID]=o,console.log(`Registered new user '${e}'`),{accepted:!0,userDetails:o}}(e))})),e.on("disconnect",(()=>{console.log(`Disconnected ${e.id}`)}))}));let r=new Set,s={}})();